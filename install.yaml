name: magento2-watcher

project_files:
  - commands/web/browsersync
  - commands/web/grunt
  - commands/web/components/variables
  - commands/web/components/functions
  - commands/web/components/themes
  - commands/web/components/init
  - commands/web/components/help
  - config.browsersync.yaml
  - browser-sync.cjs
  - Gruntfile.js
  - grunt-local-themes.js
  - grunt-config.json

ddev_version_constraint: '>= v1.23.4'

pre_install_actions:
    # https://github.com/Morgy93/ddev-gum
    - if ! ddev add-on get --installed | grep -q "OpenForgeProject/ddev-gum"; then ddev add-on get OpenForgeProject/ddev-gum; fi
    - "if [ -f .ddev/commands/web/woodoo_components/checks ]; then rm .ddev/commands/web/woodoo_components/checks && echo 'Woodoo Housekeeping: removed old file .ddev/commands/web/woodoo_components/checks'; fi"
